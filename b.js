function getProb(a){let b=new FormData;b.append("search",a),b.append("cb","1"),b.append("body","3"),b.append("solution","1"),b.append("text","2");let c=new URLSearchParams(b);return console.log(c),fetch("/search",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:c}).then(a=>a.text()).then(a=>new Promise(function(c){let d=document.createElement("iframe");document.body.appendChild(d),d.contentWindow.document.write(a),setTimeout(function(){console.log("endSearch");let e=d.contentWindow.document.getElementsByClassName("prob_nums");if(console.log(e),0==e.length)return"";let a=e[0].getElementsByTagName("a")[0].textContent;c(a)},3e3)}))}function getSol(c){return console.log("id: ",c),fetch("/problem?id="+c).then(a=>a.text()).then(d=>{let e=document.createElement("iframe"),f=document.createElement("body");e.appendChild(f),e.style="display: none;",e.setAttribute("id",c),document.body.appendChild(e),f.innerHTML=d;let g=f.getElementsByClassName("solution")[f.getElementsByClassName("solution").length-1],a=g.getElementsByTagName("p")[g.getElementsByTagName("p").length-1].textContent;return document.body.removeChild(e),a})}function sh(a){return getProb(a).then(a=>getSol(a),a=>console.log(a))}let x=document.getElementsByClassName("prob_nums");for(let a=0;a<x.length;a++)x[a].addEventListener("contextmenu",function(b){b.preventDefault();let c=window.getSelection().toString();console.log(c),sh(c).then(b=>x[a].setAttribute("title",b))});sets();
